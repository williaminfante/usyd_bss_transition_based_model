%Filename   : bss_parameters.m
%Description: Parameters for BSS operation
%
%Modification History: 
%======================================================================
%Author          Date        Ver   Remarks  
%======================================================================
%william         2016-12-06  1.0   Creation
%william         2017-01-16  1.4   Changed R_gl to negative
%======================================================================

%PARAMETERS
%Independent Parameters 
T       = test_tot_time_in_hr;
I       = test_battery_number; 

R_s     = 20;           %Revenue from Swap
R_l     = 1.00;         %Revenue from Lease
R_gh    = 0.40;         %Revenue from Grid (High demand)
R_gm    = 0.25;         %Revenue from Grid (Mid demand)
R_gl    = -0.10;         %Revenue from Grid (Low demand)

soc_max         = 0.85; 
soc_rdy_full    = 0.80; % (soc_rdy <= soc_max)
soc_rdy_partial = 0.65;
soc_min         = 0.25; 
soc_crt         = 0.40; %arbitrary 

soh_max     = 1.00; 
soh_best    = 0.80; 
soh_betr    = 0.70; 
soh_good    = 0.65;
soh_min     = 0.60; 

h_cg    = 4; 
h_dg    = 4; 
h_dh    = 48; 
h_dl    = 72; 
eta_c   = 0.95; 
eta_d   = 0.95; 
E_l     = 175; 
E_d     = 50; 
alpha   = (0.20/157680); %18 years: 157680 hours down to 20%
beta    = (0.20/2500);   %2500 cycles down to 20%

%Dependent Parameters 
r_cg = (soc_max - soc_min)/h_cg; 
r_dg = (soc_max - soc_min)/h_dg; 
r_dh = (soc_max - soc_min)/h_dh; 
r_dl = (soc_max - soc_min)/h_dl; 

load    = test_load_type;
h_customer = test_customer_data; 
l_customer = []; 

%Variables
%Continuous 
soc             = soc_max*ones(I,T);           %State of Charge
soh             = soh_max*ones(I,T);           %State of Health 
u               = zeros(I,T);                  %Used battery cycles 
R_g             = R_gm*ones(1, T);             %Revenue from Grid 
                                               % (default value:R_gm)   

%Integer 
v              = zeros(I,T);                  %Loyalty of customer 
dh             = zeros(1,T);
dl             = zeros(1,T);
loyalty        = zeros (I,T);

%VARIABLES (with initial values)    
%flags / binary        
f       = ones(I,T); %(soh >= soh_best)
g       = ones(I,T); %(soh >= soh_betr)
k       = ones(I,T); %(soh >= soh_good)
p       = ones(I,T); %(soc <= soc_crt) 
q1      = ones(I,T); %(soc >= soc_rdy_full)
q2      = ones(I,T); %(soc >= soc_rdy_partial)

%VALIDATION
transitions = 25; 
modes       = 6; 
states      = 3; 
state_space = zeros(T,30,I); 
current_mode            = zeros(I,T); 
current_transition      = zeros(I,T); 
objective               = zeros(I,T); 
dh_validation           = zeros (I,T);
dl_validation           = zeros (I,T);
sh_validation           = zeros (I,T);
m4bss_validation        = zeros (I,T);
loop_validation         = 3*ones(35, transitions);
validate_c25            = zeros (I,T);
validate_c26            = zeros (I,T);